function Turnplate(t){this.turnplate=t}Turnplate.prototype={consturctor:Turnplate,init:function(){this.defaults={awardTitleSize:"16px",awardNameSize:"14px",awardColor:"#666",showAwardName:!1,showAwardImg:!1},this.wheelcanvas=$("#"+this.turnplate.canvasID),this.drawTurnplate(this.turnplate)},drawTurnplate:function(t){var a=t.awardTitleSize||this.defaults.awardTitleSize,e=t.awardNameSize||this.defaults.awardNameSize,r=t.awardColor||this.defaults.awardColor,i=(t.showAwardName||this.defaults.showAwardName,t.canvasID),i=document.getElementById(i),n=t.turnplateRadius/2;if(i.getContext){var s=i.getContext("2d");s.clearRect(0,0,t.turnplateRadius,t.turnplateRadius),s.strokeStyle="#fff",s.font="14px Microsoft YaHei";for(var l=0;l<t.awardList.length;l++){var o=t.awardList[l],d=(t.startAngle+o.startAngel)*Math.PI/180,u=(t.startAngle+o.endAngel)*Math.PI/180;s.fillStyle=o.background||"#fff",s.beginPath(),s.arc(n,n,t.outsideRadius,d,u,!1),s.arc(n,n,t.insideRadius,u,d,!0),s.stroke(),s.fill(),s.save(),s.fillStyle=r;var f=o.title,w=20,h=(d+u)/2;if(s.translate(n+Math.cos(h)*t.textRadius,n+Math.sin(h)*t.textRadius),s.rotate(h+Math.PI/2),s.font="bold "+a+" Microsoft YaHei",s.fillText(f,-s.measureText(f).width/2,0*w),t.showAwardName){var c=o.name||"";s.font=e+" Microsoft YaHei",s.fillText(c,-s.measureText(c).width/2,1*w)}if(t.showAwardImg){var p=t.showAwardName?30:10;if(o.icon){var m=document.getElementById(o.icon);s.drawImage(m,-15,p)}}s.restore()}}},rotateFn:function(t,a){var e=parseFloat(t.endAngel+t.startAngel)/2;e+=parseFloat(this.turnplate.startAngle),e=270>e?270-e:360-e+270,this.wheelcanvas.stopRotate(),this.wheelcanvas.rotate({angle:0,animateTo:e+1800,duration:5e3,callback:function(){"function"==typeof a&&a()}})}};